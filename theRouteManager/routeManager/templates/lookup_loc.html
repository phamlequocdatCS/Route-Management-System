{% extends "main/appheader.html" %}
{% load static %}
{% block afterlogin %}

<!-- Stylesheet -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

<!-- Page Title -->
<h1 class="mb-3">Lookup Locations</h1>

<!-- Search Box -->
<div class="input-group mb-3">
    <input type="text" id="searchBox" class="form-control" placeholder="Search locations...">
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <div class="input-group-append">
        <button id="searchAllButton" class="btn btn-primary" type="button">View all locations</button>
    </div>
</div>

<!-- Location Table -->
<p id="locationCount"></p>
<table id="locationTable" class="table table-striped table-bordered">
    <thead class="thead-dark">
        <tr>
            <th id='loc-table-name' style='width: 10%'>Location Name</th>
            <th id='loc-table-address' style='width: 20%'>Location Address</th>
            <th id='loc-table-modify-date' style='width: 10%'>Modified at</th>
            <th id='loc-table-view-note-button' style='width: 25%'></th>
        </tr>
    </thead>
    <tbody id="locationList">
        <!-- The locations will be populated here by the AJAX call -->
    </tbody>

</table>

<!-- Add Note Modal -->
{% include "modal/add_note.html" %}

<!-- View Notes Modal -->
{% include "modal/view_notes.html" %}

<!-- Edit Location Modal -->
{% include "modal/edit_loc.html" %}

<style>

</style>

<script>
    const searchURL = '{% url "search" %}';
    const fetchNotesURL = '{% url "fetch_notes" %}';
    const addNoteURL = '{% url "add_note" %}';
    const bookmarkURL = '{% url "bookmark_location" %}';
    const username = '{{user.username}}';
</script>

<!-- Scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script src="{% static 'routeManager/js/common.js' %}"></script>
<script src="{% static 'routeManager/js/ajax_common.js' %}"></script>
<script src="{% static 'routeManager/js/lookup.js' %}"></script>

{% endblock afterlogin %}